{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/stuartmoir/Desktop/profdev/prisma/my-prisma-examples/javascript/7_rest-nextjs/pages/create.jsx\";\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\nimport Layout from '../components/Layout';\n\nvar Draft = function Draft() {\n  var _useState = useState(''),\n      title = _useState[0],\n      setTitle = _useState[1];\n\n  var _useState2 = useState(''),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  var _userState = userState(''),\n      _userState2 = _slicedToArray(_userState, 2),\n      authorEmail = _userState2[0],\n      setAuthorEmail = _userState2[1];\n\n  var submitData = function submitData(e) {\n    var url, init, res;\n    return _regeneratorRuntime.async(function submitData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            e.preventDefault();\n            url = 'http://localhost:3000/api/post';\n            init = {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                title: title,\n                content: content,\n                authorEmail: authorEmail\n              })\n            };\n            _context.prev = 3;\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(fetch(url, init));\n\n          case 6:\n            res = _context.sent;\n            _context.next = 9;\n            return _regeneratorRuntime.awrap(Router.push('/drafts'));\n\n          case 9:\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](3);\n            console.log(_context.t0);\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[3, 11]], Promise);\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"jsx-2644876827\" + \" \" + 'page',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, __jsx(\"form\", {\n    onSubmit: submitData,\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 11\n    }\n  }, \"Create Draft\"), __jsx(\"input\", {\n    autoFocus: true,\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    placeholder: \"Title\",\n    type: \"text\",\n    value: title,\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }\n  }), __jsx(\"input\", {\n    onChange: function onChange(e) {\n      return setAuthorEmail(e.target.value);\n    },\n    placeholder: \"Author (email address)\",\n    type: \"text\",\n    value: authorEmail,\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 11\n    }\n  }), __jsx(\"textarea\", {\n    cols: 50,\n    onChange: function onChange(e) {\n      return setContent(e.target.value);\n    },\n    placeholder: \"Content\",\n    rows: 8,\n    value: content,\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }), __jsx(\"input\", {\n    disabled: !content || !title || !authorEmail,\n    type: \"submit\",\n    value: \"Create\",\n    className: \"jsx-2644876827\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }), __jsx(\"a\", {\n    href: \"#\",\n    onClick: function onClick() {\n      return Router.push('/');\n    },\n    className: \"jsx-2644876827\" + \" \" + 'back',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, \"or Cancel\"))), __jsx(_JSXStyle, {\n    id: \"2644876827\",\n    __self: _this\n  }, \".page.jsx-2644876827{background:white;padding:3rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}input[type='text'].jsx-2644876827,textarea.jsx-2644876827{width:100%;padding:0.5rem;margin:0.5rem 0;border-radius:0.25rem;border:0.125rem solid rgba(0,0,0,0.2);}input[type='submit'].jsx-2644876827{background:#ececec;border:0;padding:1rem 2rem;}.back.jsx-2644876827{margin-left:1rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zdHVhcnRtb2lyL0Rlc2t0b3AvcHJvZmRldi9wcmlzbWEvbXktcHJpc21hLWV4YW1wbGVzL2phdmFzY3JpcHQvN19yZXN0LW5leHRqcy9wYWdlcy9jcmVhdGUuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQStEa0IsQUFHNEIsQUFTTixBQVFRLEFBTUYsV0FiRixNQVRGLEFBdUJmLEVBTlcsT0FQTyxFQVFFLEVBakJMLFlBVVMsSUFReEIsa0JBUDJDLHNDQUMzQyxFQVh5QixtR0FDSiw2RkFDckIiLCJmaWxlIjoiL1VzZXJzL3N0dWFydG1vaXIvRGVza3RvcC9wcm9mZGV2L3ByaXNtYS9teS1wcmlzbWEtZXhhbXBsZXMvamF2YXNjcmlwdC83X3Jlc3QtbmV4dGpzL3BhZ2VzL2NyZWF0ZS5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInO1xuXG5pbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0JztcblxuY29uc3QgRHJhZnQgPSAoKSA9PiB7XG4gIGNvbnN0IFt0aXRsZSwgc2V0VGl0bGVdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbY29udGVudCwgc2V0Q29udGVudF0gPSB1c2VTdGF0ZSgnJyk7XG4gIGNvbnN0IFthdXRob3JFbWFpbCwgc2V0QXV0aG9yRW1haWxdID0gdXNlclN0YXRlKCcnKTtcblxuICBjb25zdCBzdWJtaXREYXRhID0gYXN5bmMgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL3Bvc3QnO1xuICAgIGNvbnN0IGluaXQgPSB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB0aXRsZSwgY29udGVudCwgYXV0aG9yRW1haWwgfSlcbiAgICB9O1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgaW5pdCk7XG4gICAgICBhd2FpdCBSb3V0ZXIucHVzaCgnL2RyYWZ0cycpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9J3BhZ2UnPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17c3VibWl0RGF0YX0+XG4gICAgICAgICAgPGgxPkNyZWF0ZSBEcmFmdDwvaDE+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICBhdXRvRm9jdXNcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldFRpdGxlKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdUaXRsZSdcbiAgICAgICAgICAgIHR5cGU9J3RleHQnXG4gICAgICAgICAgICB2YWx1ZT17dGl0bGV9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgIG9uQ2hhbmdlPXtlID0+IHNldEF1dGhvckVtYWlsKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdBdXRob3IgKGVtYWlsIGFkZHJlc3MpJ1xuICAgICAgICAgICAgdHlwZT0ndGV4dCdcbiAgICAgICAgICAgIHZhbHVlPXthdXRob3JFbWFpbH1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDx0ZXh0YXJlYVxuICAgICAgICAgICAgY29scz17NTB9XG4gICAgICAgICAgICBvbkNoYW5nZT17ZSA9PiBzZXRDb250ZW50KGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPSdDb250ZW50J1xuICAgICAgICAgICAgcm93cz17OH1cbiAgICAgICAgICAgIHZhbHVlPXtjb250ZW50fVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICBkaXNhYmxlZD17IWNvbnRlbnQgfHwgIXRpdGxlIHx8ICFhdXRob3JFbWFpbH1cbiAgICAgICAgICAgIHR5cGU9J3N1Ym1pdCdcbiAgICAgICAgICAgIHZhbHVlPSdDcmVhdGUnXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8YSBjbGFzc05hbWU9J2JhY2snIGhyZWY9JyMnIG9uQ2xpY2s9eygpID0+IFJvdXRlci5wdXNoKCcvJyl9PlxuICAgICAgICAgICAgb3IgQ2FuY2VsXG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLnBhZ2Uge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgIHBhZGRpbmc6IDNyZW07XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXRbdHlwZT0ndGV4dCddLFxuICAgICAgICB0ZXh0YXJlYSB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMC41cmVtO1xuICAgICAgICAgIG1hcmdpbjogMC41cmVtIDA7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMC4yNXJlbTtcbiAgICAgICAgICBib3JkZXI6IDAuMTI1cmVtIHNvbGlkIHJnYmEoMCwgMCwgMCwgMC4yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlucHV0W3R5cGU9J3N1Ym1pdCddIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWNlY2VjO1xuICAgICAgICAgIGJvcmRlcjogMDtcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtIDJyZW07XG4gICAgICAgIH1cblxuICAgICAgICAuYmFjayB7XG4gICAgICAgICAgbWFyZ2luLWxlZnQ6IDFyZW07XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRHJhZnQ7XG4iXX0= */\\n/*@ sourceURL=/Users/stuartmoir/Desktop/profdev/prisma/my-prisma-examples/javascript/7_rest-nextjs/pages/create.jsx */\"));\n};\n\nexport default Draft;","map":{"version":3,"sources":["/Users/stuartmoir/Desktop/profdev/prisma/my-prisma-examples/javascript/7_rest-nextjs/pages/create.jsx"],"names":["React","useState","fetch","Router","Layout","Draft","title","setTitle","content","setContent","userState","authorEmail","setAuthorEmail","submitData","e","preventDefault","url","init","method","headers","body","JSON","stringify","res","push","console","log","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\n\nimport Layout from '../components/Layout';\n\nconst Draft = () => {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [authorEmail, setAuthorEmail] = userState('');\n\n  const submitData = async e => {\n    e.preventDefault();\n    const url = 'http://localhost:3000/api/post';\n    const init = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ title, content, authorEmail })\n    };\n\n    try {\n      const res = await fetch(url, init);\n      await Router.push('/drafts');\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <Layout>\n      <div className='page'>\n        <form onSubmit={submitData}>\n          <h1>Create Draft</h1>\n          <input\n            autoFocus\n            onChange={e => setTitle(e.target.value)}\n            placeholder='Title'\n            type='text'\n            value={title}\n          />\n          <input\n            onChange={e => setAuthorEmail(e.target.value)}\n            placeholder='Author (email address)'\n            type='text'\n            value={authorEmail}\n          />\n          <textarea\n            cols={50}\n            onChange={e => setContent(e.target.value)}\n            placeholder='Content'\n            rows={8}\n            value={content}\n          />\n          <input\n            disabled={!content || !title || !authorEmail}\n            type='submit'\n            value='Create'\n          />\n          <a className='back' href='#' onClick={() => Router.push('/')}>\n            or Cancel\n          </a>\n        </form>\n      </div>\n      <style jsx>{`\n        .page {\n          background: white;\n          padding: 3rem;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        }\n\n        input[type='text'],\n        textarea {\n          width: 100%;\n          padding: 0.5rem;\n          margin: 0.5rem 0;\n          border-radius: 0.25rem;\n          border: 0.125rem solid rgba(0, 0, 0, 0.2);\n        }\n\n        input[type='submit'] {\n          background: #ececec;\n          border: 0;\n          padding: 1rem 2rem;\n        }\n\n        .back {\n          margin-left: 1rem;\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default Draft;\n"]},"metadata":{},"sourceType":"module"}